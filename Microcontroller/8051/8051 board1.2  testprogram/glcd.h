/**LCD PIN DEFINITION**/
#define lcd P0
sbit R=P3^4; 
sbit RW1=P3^5;
sbit EN1=P3^6;
sbit RST=P3^7;
sbit CS1=P2^2;
sbit CS2=P2^3;

/**LCD FUNCTIONS DECLARATION**/
void glcd_init(void);
void busy_check(void);  
void writecmd(unsigned char); 
void writedata(unsigned char);
void clear_display(void);
void pageclear(void);
void graph(void);

/**VARIABLE INITIALIZATION**/
code unsigned char const arr[8][128] = 
{
 {
  32, 32,112,112,112,112,112,  0, 12, 15, 12,128,140,143,140,128, 
 140,143,140,128,140,143,140,128,140,143,140,128,140,143,140,128, 
 140,143,140,128,140,143,140,128,140,143,140,128,140,143,140,128, 
 140,143,140,128,140,143,140,128,140,143,140,128,140,143,140,128, 
 140,143,140,128,140,143,140,128,140,143,140,128,140,143,140,128, 
 140,143,140,128,140,143,140,128,140,143,140,128, 12, 15, 12,  0, 
 112,112,112,112,112, 32, 32,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0},
{
  34, 34,119,119,119,119,119,  0,  0,  0,  0,157,157,157,157, 29, 
  57, 57, 57, 57,123,123,123,115,243,243,247,247,231,231,231,231, 
 207,207,207,207,143,159,159,159, 63, 63, 63,127,127,127,255,255, 
 255,255,255,255,255,255,255,255,255,255,255,255,255,127,127,127, 
  63, 63,191,159,159,223,207,207,239,239,231,231,247,247,247,243, 
 243,251,251,123,121,121, 57, 61,189,189,157,221,  0,  0,  0,  0, 
 119,119,119,119,119, 34, 34,  0,  0,  0,248,  0,  0,  0,  0,  0, 
 184,168,168,168,232,  0,  0,  0,  0,  0,248,136,136,136,248,  0},
{
  34, 34,119,119,119,119,119,  0,  0,  0,  0,127,127,255,255,255, 
 255,255,255,254,254,254,254,252,252,252,252,249,249,241,243,243, 
 231,231,199,207,143,159, 31, 63, 63,127,127,254,254,254,124, 60, 
  56, 25, 25,  3,131,227,227,227,129, 25, 24, 60, 60,126,254,255, 
 255,127,127, 63, 63, 31,159,143,207,199,231,227,243,241,249,249, 
 252,252,254,254,254,255,255,255,255,255,255,127,  0,  0,  0,  0, 
 119,119,119,119,119, 34, 34,  0,192, 64, 64,192,  0,  0,  0,128, 
  64, 64,128,  0,  0,  0,128, 64, 64,128,  0,  0,  0, 64,192,  0},
{
  34, 34,119,119,119,119,119,  0,  0,  0,  0,254,252,252,252,248, 
 249,249,241,243,227,227,199,199,143,143, 31, 31, 63, 63,127,127, 
 255,255,255,255,255,255,255,126, 30, 12,  0,  0,  0,128,192,128, 
   0, 12, 30, 63,127,255,255,255,127, 63, 30, 12,  0,  0,128,192, 
 128,  0,  0, 12, 62,127,255,255,255,255,255,255,127, 63, 63, 31, 
 143,143,199,199,227,243,243,249,249,252,252,254,  0,  0,  0,  0, 
 119,119,119,119,119, 34, 34,  0, 19, 18, 18, 31,  0,  0,  0, 15, 
  16, 16, 15,  0,  0,  0, 15, 16, 16, 15,  0,  0,  0, 16, 31, 16},
{
  34, 34,119,119,119,119,119,  0,  0,  0,  0,127,127,127,127,127, 
 127,127,127,127,127,127,127,127,127,127,127,126,126,124,120,112, 
  96, 65, 65,  3,  7,  3,  1,  0, 64, 96,120,126,127,127,127,127, 
 127,126,120, 96, 64,  1,  1,  1,  0, 64, 96,120,126,127,127,127, 
 127,127,126,120, 96, 64,  3,  7,  3, 65, 97,112,120,124,126,127, 
 127,127,127,127,127,127,127,127,127,127,127,127,  0,  0,  0,  0, 
 119,119,119,119,119, 34, 34,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0, 56, 56, 56, 56, 56, 56, 56, 56, 56,  0,  0,  0,  0,  0,  0},
{
  34, 34,119,119,119,119,119,  0,  0,  0,  0, 14,126,254,254,254, 
 240,192,240,254,254,254,126, 14,  0,  0,254,254,254,254,254,114, 
 114,114,114,114,  2,  0,252,254,254,254,254,  2,  2,206,206,206, 
 206,206,  0,  2,  2,  2,  2,254,254,254,254,254,  2,  2,  2,  2, 
   0,252,254,254,254,254,  2,  2,  2,254,254,254,254,252,  0,  0, 
 254,254,254,254,254, 50, 50,254,254,254,222,222,  0,  0,  0,  0, 
 119,119,119,119,119, 34, 34,  0, 32, 16, 16,224,  0,  0,  0,224, 
  16, 16,224,  0,  0,  0,224, 16, 16,224,  0,  0, 96,144,144, 96},
{
  34, 34,119,119,119,119,119,  0,  0,  0,  0,  0,  0,  1,  3,  3, 
 243,243,  3,  3,  3,241,240, 32, 64,240,243,  3,  3,  3,115, 82, 
  82, 82,210,  2,  2,  0, 17, 17, 19,243,243, 19, 19, 19,  3,  3, 
   3,243,240,  0,  0,  0, 16, 19, 19,243,243, 19, 16, 16,  0,  0, 
   0,241,243,  3,  3,243,242,  2,  2,  3, 19, 19, 19,241,240, 16, 
  19, 19,  3,  3,  3,240,240, 83, 83, 83, 83, 83,  0,  0,  0,  0, 
 119,119,119,119,119, 34, 34,  0,  4,  6,  5,  4,  0,  0,  0,  3, 
   4,  4,  3,  0,  0,  0,  3,  4,  4,  3,  0,  0,  3,  4,  4,  3},
{
   2,  2,  7,  7,  7,  7,  7,  0, 24,120, 24,  0, 24,120, 24,  0, 
  25,121, 24,  0, 24,121, 25,  0, 24,121, 25,  0, 24,120, 25,  1, 
  25,121, 25,  0, 24,120, 24,  0, 24,121, 25,  0, 24,120, 24,  0, 
  24,121, 25,  0, 24,120, 24,  0, 24,121, 25,  0, 24,120, 24,  0, 
  24,120, 25,  1, 25,121, 24,  0, 24,120, 24,  0, 24,121, 25,  0, 
  24,120, 24,  0, 24,121, 25,  1, 25,121, 25,  1, 24,120, 24,  0, 
   7,  7,  7,  7,  7,  2,  2,  0,  0,  0,  0,  0,  0,  0,  0,  0, 
   0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0}
};

/**MAIN FUNCTION**/
void display()
{   
     glcd_init();		//GRAPHICAL LCD INITIALIZATION FUNCTION
	 clear_display();   //CLEAR DISPALY FUNCTION
     graph();			//GRAPH FUNCTION CALLING			
}

/**GRAPHICAL LCD INITIALIZATION FUNCTION**/
void glcd_init(void)
{   
    RST = 0;
    delay_ms(10);
    RST = 1;
    delay_ms(1);
    EN1 = 0;
    CS1 = 0;
    CS2 = 0;
    RW1 = 0;
    R = 0;
    writecmd(0x3e);	     // 0x3E turn it Off.
    writecmd(0x3f);	     // 0x3F Display ON.
    writecmd(0x40);      // display data in horizontal way(0-63) 
    writecmd(0xb8);      // display data in vertical way(0-7)
    writecmd(0xc0); 	 // indicates the display data RAM displayed on the top of the screen              
}

/**BUSY CHECK FUNCTION**/
void busy_check(void)   
{  
    delay_ms(1);
    R = 0;
    RW1 = 0;
}

/**LCD COMMAND FUNCTION**/
void writecmd(unsigned char G_lcd)
{
      busy_check();                                
      R = 0; 
      CS1 = 1;
      CS2 = 1;                             // CS1 AND CS2(P1.23 and P1.24) are enabled.
      lcd =  G_lcd;
      EN1 = 1;                // E->SET.
      EN1 = 0;                // E->CLR.
}

/**LCD DATA FUNCTION**/
void writedata(unsigned char ch)
{
       busy_check();
       R = 1;	
       lcd = ch;
       EN1 = 1;
       EN1 = 0;
}

/**LCD CLEAR FUNCTION**/
void clear_display()
{
 	pageclear();
}

/**PAGE CLEAR FUNCTION**/
void pageclear(void)
{
      int i,y;
      CS1 = 1;
      CS2 = 1;	// CS1 AND CS2(P1.23 and P1.24) are enabled.
      for(i=0xb8;i<0xc0;i++)
      {
             writecmd(i);                        // Select Pages.  
	         writecmd(0x40);                      
             for (y=0;y<64;y++)
   	     	 writedata(0x00);                  // Clear data in the LCD.
      }	    	
}

/**PAGE SELECTION FUNCTION**/
void graph()
{	
      int i,j;
      for(j=0;j<8;j++)
      {
        writecmd(0xB8+j);
	    writecmd(0x40);	
        CS1 = 1;	// PAGE 1  IS SELECGTED.
	    CS2 = 0;    // PAGE 2  IS DISABLE.
        for(i=0;i<128;i++)
        { 
            if(i==64)
            {
                CS2 = 1;	//PAGE 2  IS SELECGTED
                CS1 = 0;     //PAGE 1  IS DISABLE.
            }
            writedata(arr[j][i]);
	    }  
      } 
}





